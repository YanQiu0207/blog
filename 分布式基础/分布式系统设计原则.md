# 分布式系统设计原则

（1）系统应结合应用程序的特点以及技术环境来设计。
* 应用程序的特点：例如针对高频操作优化
* 技术环境：能否快速支持系统落地；后续的维护成本会不会很大

（2）系统的接口设计
* 简单易用：最好是跟已有设计类似，减少额外的学习成本，让用户更容易上手。例如分布式文件系统的操作接口跟 Linux 的 POSIX 很像
* 尽量屏蔽底层分布式系统的复杂性

（3）组件故障是常态，而不是异常。由于机器数据很多，任意时间都有机器不能工作，甚至无法从故障中恢复。因此，持续监控、错误检测、容错和自动恢复必须是系统不可或缺的组成部分

（4）使用单点 Master 的系统需要注意哪些问题
* 不要跟其它服务部署在同一台机器，因为机器资源（CPU或内存等）可能不够用；不可靠的应用程序代码导致机器的可靠性降低
* 单点 Master 只做决策，最小化参与业务读写，避免成为系统的瓶颈

（5）如何解决性能热点问题?

* 客户端
  * 错开访问时间，减少并发量
  * 允许客户端向其它客户端读取数据（流水线传输？），减少并发量
  * 提前失败，减少并发量
* 服务端
  * 增大副本数量，分散请求
  * 限流，避免请求将服务器打垮

（6） 一个好的分布式系统设计，就是要让使用系统的开发人员意识不到分布式的存在。

- chubby 分布式锁服务代替 paxos 算法模块提供选主功能