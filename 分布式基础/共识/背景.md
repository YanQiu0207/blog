# 背景

[TOC]

如果系统中存在单点，对系统有哪些影响？

- **可用性**。一旦单点出现硬件故障或者网络故障，整个系统就不能提供完整的服务了
- **性能**。单点的性能有上限且无法扩展，业务快速增长时很容易成为系统瓶颈

那如何避免单点呢？最朴素的想法，增加一台备份机器。假设当前运行的机器叫 Master，它的备份机器叫 Backup Master。通过一个监控机制，在发现 Master 故障时，把流量切换到 Backup Master，整个系统又能继续运行了。但是，我们至少会遇到两个问题：

- 如何保证这两台机器的数据一致？如果 Master 在复制数据到 Backup Master 的过程中宕机了，然后切换到备份机器，但 Backup Master 没有那部分数据，即数据丢失了。
- 监控程序怎么确定 Master 是真的出故障还是它俩之间的网络有问题？如果是后者，系统会不会同时出现两个 Master 的情况呢？

